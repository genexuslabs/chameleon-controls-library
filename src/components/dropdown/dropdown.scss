@import "../../common/_base";

$z-index-gx-navbar-item: 107; // Same as $z-index-gx-navbar-item from w-c-l

:where(button) {
  all: unset;
}

// Must be placed after the ":where(a, button)"
@include box-sizing();

:host {
  --ch-dropdown-item__image-size: #{$default-decorative-image-size};

  --separation: 0px;
  --separation-x: var(--separation);
  --separation-y: var(--separation);

  display: flex;
  position: relative;
  inline-size: 100%;
  block-size: 100%;
}

// Make the ch-popover control relative to the dropdown
:host(.ch-dropdown--relative-popover) {
  transform: translateX(0);
  --ch-popover-stay-in-the-same-layer: true;
}

.expandable-button {
  display: flex;
  align-items: center;
  justify-content: center;
  align-self: center;
  position: relative;
  inline-size: 100%;
  block-size: 100%;
  cursor: pointer;
  z-index: $z-index-gx-navbar-item + 1;

  &:focus-visible {
    outline: 1px solid currentColor;
  }
}

// Remove focus of the button content
::slotted([slot="action"]) {
  pointer-events: none;
}

// - - - - - - - - - - - - - - - -
//           Separation
// - - - - - - - - - - - - - - - -
// Dummy separation to keep opened the popup when expand-behavior === "ClickOrHover"
// ch-window[y-align="outside-start"] {
//   --ch-window-separation: var(--separation-y);
//   --ch-window-separation-y: calc(var(--separation-y) * -1);
// }

// ch-window[y-align="outside-end"] {
//   --ch-window-separation: var(--separation-y);
//   --ch-window-separation-y: var(--separation-y);
// }

// ch-window[x-align="outside-start"] {
//   --ch-window-separation: var(--separation-x);
//   --ch-window-separation-x: calc(var(--separation-x) * -1);
// }

// ch-window[x-align="outside-end"] {
//   --ch-window-separation: var(--separation-x);
//   --ch-window-separation-x: var(--separation-x);
// }

.list {
  display: flex;
  flex-direction: column;
}

.action {
  display: flex;
  align-items: center;
  inline-size: 100%;
  block-size: 100%;
  cursor: pointer;
  text-align: start;

  &:focus-visible {
    outline: 1px solid currentColor;
  }
}

// - - - - - - - - - - - - - - - -
//             Images
// - - - - - - - - - - - - - - - -
.start-img::before,
.end-img::after {
  content: "";
  display: block;
  inline-size: var(--ch-dropdown-item__image-size);
  block-size: var(--ch-dropdown-item__image-size);
  min-inline-size: var(--ch-dropdown-item__image-size);
}

.start-img::before {
  background-image: var(--ch-dropdown-item-start-img);
  background-size: 100%;
}

.end-img::after {
  background-image: var(--ch-dropdown-item-end-img);
  background-size: 100%;
}

.content {
  inline-size: 100%;
}
