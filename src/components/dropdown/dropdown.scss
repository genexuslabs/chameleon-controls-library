@import "./dropdown-tokens";

:where(button) {
  all: unset;
}

*,
::before,
::after {
  box-sizing: border-box;
}

@media (prefers-color-scheme: light) {
  .section {
    background-color: $dropdown-background-color--light-scheme;
    color: $dropdown-color--light-scheme;
  }
}

@media (prefers-color-scheme: dark) {
  .section {
    background-color: $dropdown-background-color--dark-scheme;
    color: $dropdown-color--dark-scheme;
  }
}

:host {
  --ch-dropdown-rtl-initial-X: 1;

  // Default translate X
  --ch-dropdown-translateX: 0;

  // Default translate Y
  --ch-dropdown-translateY: 0;

  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
}

.expandable-button {
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
  cursor: pointer;

  &:focus-within {
    box-shadow: 0px 0px 0 2px currentColor;
    transition: box-shadow 250ms;
  }
}

// - - - - - - - - - - - - - - - -
//        Dummy separation
// - - - - - - - - - - - - - - - -
// Dummy separation to keep opened the popup when expand-behavior === "hover"
.dummy-separation {
  display: flex;
  position: absolute;
  z-index: 107; // Same as $z-index-gx-navbar-item from w-c-l

  // Top or Bottom
  &--vertical {
    width: 100%;
    height: var(--separation-between-button-size);
  }

  &--top {
    inset-block-start: var(--separation-between-button);
  }

  &--bottom {
    inset-block-end: var(--separation-between-button);
  }

  // Left or Right
  &--horizontal {
    width: var(--separation-between-button-size);
    height: 100%;
  }

  &--left {
    inset-inline-start: var(--separation-between-button);
  }

  &--right {
    inset-inline-end: var(--separation-between-button);
  }
}

.section {
  position: absolute;
  border-radius: 5px;
  box-shadow: 0 3px 4px #80808024, 0 3px 3px -2px #8080801f, 0 1px 8px #80808030;
  width: max-content;
  max-width: 350px;
  z-index: 107; // Same as $z-index-gx-navbar-item from w-c-l
}

// Separation between list and header/footer
.header + .list,
.list + .footer {
  margin-block-start: 8px;
}

.list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

// - - - - - - - - - - - - - - - -
//        Section position
// - - - - - - - - - - - - - - - -
.position--top {
  inset-block-start: var(--separation-between-button);
  transform: translate(var(--ch-dropdown-translateX), -100%);
}

.position--right {
  inset-inline-end: var(--separation-between-button);
  transform: translate(
    calc(100% * var(--ch-dropdown-rtl-initial-X)),
    var(--ch-dropdown-translateY)
  );
}

.position--bottom {
  inset-block-end: var(--separation-between-button);
  transform: translate(var(--ch-dropdown-translateX), 100%);
}

.position--left {
  inset-inline-start: var(--separation-between-button);
  transform: translate(
    calc(-100% * var(--ch-dropdown-rtl-initial-X)),
    var(--ch-dropdown-translateY)
  );
}

// - - - - - - - - - - - - - - - -
//        Section Alignment
// - - - - - - - - - - - - - - - -
.align--left {
  inset-inline-start: 0;
}

.align--center {
  inset-inline-start: 50%;
  --ch-dropdown-translateX: calc(-50% * var(--ch-dropdown-rtl-initial-X));
}

.align--right {
  inset-inline-end: 0;
}

.valign--top {
  inset-block-start: 0;
}

.valign--middle {
  inset-block-start: 50%;
  --ch-dropdown-translateY: calc(-50% * var(--ch-dropdown-rtl-initial-X));
}

.valign--bottom {
  inset-block-end: 0;
}
