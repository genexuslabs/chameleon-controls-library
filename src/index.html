<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <meta
      name="description"
      content="A library of white-label, highly-customizable and reusable web components.
      "
    />
    <title>Chameleon</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="./showcase/assets/icons/favicon.ico"
    />

    <script type="module" src="/build/chameleon.esm.js"></script>
    <script nomodule src="/build/chameleon.js"></script>

    <script>
      // Get the latest version
      fetch(
        `https://registry.npmjs.org/@genexus/chameleon-controls-library/latest`
      )
        .then(response => response.json())
        .then(data => {
          // const chameleonVersion = document.getElementById("chameleon-version");
          // chameleonVersion.textContent = data.version;
        });
    </script>

    <link href="showcase/base.css" rel="stylesheet" rel="preload" as="style" />
    <link href="showcase/index.css" rel="stylesheet" />
    <!-- <link
      href="https://unpkg.com/@genexus/unanimo@latest/dist/css/unanimo.css"
      rel="stylesheet"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    /> -->

    <style>
      /* Avoid FOUC (Flash Of Unstyled Content) */
      html:not(.hydrated) {
        visibility: hidden;
      }
    </style>
  </head>
  <body>
    <script>
      const themeRef = document.createElement("ch-theme");
      themeRef.model = [
        { name: "chameleon/scrollbar", url: "showcase/scrollbar.css" },

        // TODO: Use the right url
        { name: "ch-markdown-viewer", url: "showcase/scrollbar.css" }
      ];
      document.body.append(themeRef);
    </script>

    <ch-showcase></ch-showcase>

    <script type="module">
      // const searchInputRef = document.querySelector(".form-input-search");
      // const mainPage = document.querySelector(".main-page");
      // const showcase = document.querySelector("ch-showcase");
      // const home = document.querySelector(".home");
      // const chameleonHome = document.getElementById("chameleon-home");

      // const setMainPage = () => {
      //   // mainPage.hidden = false;
      //   // showcase.hidden = true;
      //   // showcase.componentName = undefined;
      //   // showcase.pageSrc = undefined;
      // };

      // const setPage = () => {
      //   if (window.location.hash && window.location.hash !== "#") {
      //     const componentName = window.location.hash.replace("#", "");
      //     const treeItemInformation = treeViewComponents.find(
      //       treeItem => treeItem.id === componentName
      //     );

      //     // If the hash is a valid page
      //     if (treeItemInformation) {
      //       // showcase.componentName = componentName;
      //       showcase.pageSrc = `showcase/pages/${componentName}.html`;
      //       showcase.pageName = treeItemInformation.caption;
      //       showcase.status = `(${
      //         treeItemInformation.metadata.split("---")[1]
      //       })`;

      //       // mainPage.hidden = true;
      //       showcase.hidden = false;

      //       // Mark the new selected item in the Tree View
      //       // treeViewRef.updateItemsProperties([componentName], {
      //       //   selected: true
      //       // });
      //       return;
      //     }
      //   }

      //   // Go to Main page
      //   setMainPage();
      // };

      // Initialize sample
      // setPage();

      // WA to reset the page when clicking in the logo
      // chameleonHome.addEventListener("click", () => {
      //   mainPage.hidden = false;
      //   showcase.hidden = true;
      //   showcase.componentName = undefined;
      //   showcase.pageSrc = undefined;
      // });

      // // When the selected item of the Tree View changes, the main page must be updated
      // treeViewRef.addEventListener("selectedItemsChange", () => {
      //   if (event.detail?.length > 0) {
      //     const componentName = event.detail[0].item.id;

      //     // This is a WA until we have the ch-navigation-list component
      //     window.location.hash = `#${componentName}`;
      //   }
      // });

      // window.addEventListener("hashchange", setPage);
    </script>
  </body>
</html>
