<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <title>Stencil Component Starter</title>
    <script type="module" src="/build/chameleon.esm.js"></script>
    <script nomodule src="/build/chameleon.js"></script>
    <link href="/build/chameleon.css" rel="stylesheet" />
  </head>  <style>
    body {
      margin: 0;
    }
    .main {
      /* flex-direction: row-reverse; */
    }
    .container {
      
    }
  </style>

  <script type="text/javascript">
    window.addEventListener(
      'load',
      () => {
        const actionGroup = document.querySelector('ch-action-group');
        document.addEventListener('actionGroupItemSelected', ev => {
          console.log(ev);
        });

        actionGroup.addEventListener('displayedItemsCountChange', ev => {
         
          // const itemsMenu = actionGroup.querySelectorAll(":scope > ch-action-group-item[slot='more-button-item']");
          // itemsMenu.forEach(item => item.remove());

          const items = actionGroup.querySelectorAll(":scope > ch-action-group-item[slot='list-item']");
          const moreButton = actionGroup.querySelectorAll(":scope > ch-action-group-item[slot='more-button-item']");

          // items.forEach((item, ind) =>{
          //   console.log(ind)
          //   if(ind >= ev.detail){
          //     itemClone = item.cloneNode(true);
          //     itemClone.setAttribute("slot","more-button-item");
          //     actionGroup.appendChild(itemClone);
          //   }
          // });
          items.forEach((item, ind) => {
            console.log(ind);
            if (ind >= ev.detail) {
              item.setAttribute('slot', 'more-button-item');
              item.setAttribute('disposed-top', false);
            }
          });

          if (moreButton.length > 0) {
            for (let index = 0; index < ev.detail - items.length; index++) {
              moreButton[index].setAttribute('slot', 'list-item');
              item.setAttribute('disposed-top', true);
            }
          }
        });
      },
      false,
    );

    function incrementItem(id) {
      const item = document.getElementById(id);
      // item.setAttribute('style', "padding-left: 80px");
      item.innerHTML = 'Un texto grande por aca para aumentar el tamaÃ±o';
    }
  </script>
</head>

<body>
  <div class="main">
    <!-- <div style="height: 300px;width: 400px;" >hola</div> -->
    <div class="container">
      <ch-action-group css-class="action-group-fancy" items-overflow-behavior="Responsive Collapse" more-actions-button-position="Start">
        <ch-action-group-item slot="list-item" id="item1" link="http://google.com" css-class="itemClass1"> Navegar a zzz </ch-action-group-item>

        <ch-action-group-item slot="list-item" id="item2" css-class="itemClass1" grouped-class="itemClass1--grouped">
          Dispara el evento
          <ch-action-group-menu slot="menu">
            <ch-action-group-item id="item2-1" link="http://google.com" css-class="itemClass1"> Navegar a item2 1 </ch-action-group-item>

            <ch-action-group-item id="item2-2" css-class="itemClass1"> Dispara el evento desde item2 2 </ch-action-group-item>
          </ch-action-group-menu>
        </ch-action-group-item>

        <ch-action-group-item slot="list-item" id="item3">
          Abre un submenu
          <ch-action-group-menu slot="menu">
            <ch-action-group-item id="item3-1" link="http://google.com" css-class="itemClass1"> Navegar a yyy </ch-action-group-item>

            <ch-action-group-item id="item3-2" css-class="itemClass1">
              Abre un sub submenu
              <ch-action-group-menu slot="menu">
                <ch-action-group-item id="item3-2-2" css-class="itemClass1">
                  Abre un sub sub submenu
                  <ch-action-group-menu slot="menu">
                    <ch-action-group-item id="item3-2-2-1" link="http://google.com" css-class="itemClass1"> Navegar a uuu </ch-action-group-item>

                    <ch-action-group-item id="item3-2-2-2" css-class="itemClass1"> Dispara el evento desde sub sub submenu </ch-action-group-item>
                  </ch-action-group-menu>
                </ch-action-group-item>

                <ch-action-group-item id="item3-2-1" link="http://google.com" css-class="itemClass1"> Navegar a cccc </ch-action-group-item>
              </ch-action-group-menu>
            </ch-action-group-item>

            <ch-action-group-item id="item3-3" link="http://google.com" css-class="itemClass1"> Navegar a 1111 </ch-action-group-item>

            <ch-action-group-item id="item3-4" link="http://google.com" css-class="itemClass1"> Navegar a 22222 </ch-action-group-item>
          </ch-action-group-menu>
        </ch-action-group-item>

        <ch-action-group-item slot="list-item" id="item4">
          Abre un submenu 4
          <ch-action-group-menu slot="menu">
            <ch-action-group-item id="item4-1" link="http://google.com" css-class="itemClass1"> Navegar a ooo </ch-action-group-item>

            <ch-action-group-item id="item4-2" css-class="itemClass1"> Dispara el evento desde submenu </ch-action-group-item>
          </ch-action-group-menu>
        </ch-action-group-item>

        <!-- <ch-action-group-item slot="more-button-item" id="item5">
        Abre un submenu 5
        <ch-action-group-menu slot="menu">

          <ch-action-group-item id="item5-1" link="http://google.com" css-class="itemClass1">
            Navegar a ooo
          </ch-action-group-item>

          <ch-action-group-item id="item5-2" css-class="itemClass1">
            Dispara el evento desde submenu
          </ch-action-group-item>

        </ch-action-group-menu>
      </ch-action-group-item> -->
      </ch-action-group>
    </div>

    <!-- <div style="height: 300px;width: 400px;" >hola</div> -->
  </div>

  <button onclick="incrementItem('item1')">Hola</button>
</body>
</html>
