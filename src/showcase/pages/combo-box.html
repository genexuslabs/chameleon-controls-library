<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <title>ComboBox</title>
    <script type="module" src="/build/chameleon.esm.js"></script>
    <script nomodule src="/build/chameleon.js"></script>
    <link href="/build/chameleon.css" rel="stylesheet" />

    <style>
      /* Avoid FOUC (Flash Of Unstyled Content) */
      html:not(.hydrated) {
        visibility: hidden;
      }

      body {
        display: grid;
        grid-template-columns: 1fr 260px;
        gap: var(--spacing-un-spacing--l);
      }

      fieldset {
        display: grid;
        grid-auto-flow: row;
        grid-auto-rows: max-content;
        gap: 8px;
        border: unset;
        padding: unset;
      }

      .card-fields {
        display: grid;
        grid-template-columns: 1fr 300px;
      }

      .field {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .card-properties > fieldset > legend {
        margin-block-end: var(--spacing-un-spacing--m);
      }

      ch-combo-box {
        --ch-combo-box-item-gap: 5px;
        border: 8px solid;
        padding: 8px;
        margin: 4px;
        background-color: aliceblue;
        box-sizing: border-box;
      }

      ch-combo-box:focus {
        border-color: blueviolet;
      }

      ch-combo-box::part(window) {
        background-color: beige;
        border: 1px solid;
      }

      ch-combo-box::part(window__content) {
        padding: 8px;
      }

      ch-combo-box::part(item disabled),
      ch-combo-box::part(group disabled) {
        opacity: 0.5;
      }

      ch-combo-box::part(item nested) {
        padding-inline-start: calc(
          var(--ch-combo-box-group__image-size) * 2 +
            var(--ch-combo-box-item-gap) * 2
        );
      }

      ch-combo-box::part(item) {
        border: 1px solid;
        background-color: rgb(215, 179, 136);
      }

      ch-combo-box::part(item selected) {
        background-color: rgb(152, 215, 136);
      }

      ch-combo-box::part(item):focus {
        outline: 2px solid;
      }

      ch-combo-box::part(item):hover {
        filter: brightness(0.85);
      }

      ch-combo-box::part(group__caption) {
        font-family: SourceSansPro_Bold;
      }
    </style>
  </head>
  <body class="white-label">
    <div class="card card-fields">
      <form id="myForm">
        <div class="field">
          <label for="combobox-1">Label for combobox-1</label>
          <ch-combo-box
            name="combobox-1"
            id="combobox-1"
            placeholder="Choose a value..."
            style="width: 150px"
            value="Value 1"
          ></ch-combo-box>
        </div>

        <!-- <div>
          <label>
            Label for combobox-2
            <ch-combo-box></ch-combo-box>
          </label>
        </div>

        <label for="combobox-3">Label for combobox-3</label>
        <ch-combo-box
          accessible-name="Custom label 3"
          id="combobox-3"
          value="Value 3"
        ></ch-combo-box>

        <label>
          Label for combobox-4
          <ch-combo-box
            name="checkboxxxxx"
            accessible-name="Custom label 4"
            value="Value 4"
          ></ch-combo-box>
        </label>

        <label>
          Native input checkbox
          <input
            name="native"
            type="checkbox"
            aria-label="Holaa"
            value="nativeeee"
          />
        </label> -->

        <!-- <div>
          <label>
            "Native" Select
            <select id="native-select">
              <option value="1">Value 1</option>
              <option value="2">Value 2</option>
              <option value="3">Value 3</option>
              <option value="4">Value 4</option>
            </select>
          </label>
        </div>

        <div>
          <label>
            "Native" Web Component
            <ch-native></ch-native>
          </label>
        </div>

        <label for="lname">Last name:</label>
        <input type="text" id="lname" name="lname" value="Doe" />

        <div>
          <label style="display: grid">
            Last name 2:
            <input type="checkbox" name="lname" value="Doe" />
          </label>
        </div> -->
      </form>

      <ch-textblock id="filter-change-textblock"
        >+ + + + + + + Filter Change + + + + + + +</ch-textblock
      >
    </div>

    <div class="card card-properties">
      <fieldset>
        <label class="form-input__label" for="current-value"
          >Current value</label
        >
        <input id="current-value" class="form-input" readonly value="Value 1" />
      </fieldset>

      <hr />

      <fieldset>
        <legend class="form-input__label">Properties</legend>

        <div>
          <ch-checkbox
            id="disabled"
            checked-value="true"
            un-checked-value="false"
            value="false"
            caption="Disabled"
          ></ch-checkbox>

          <ch-checkbox
            id="readonly"
            checked-value="true"
            un-checked-value="false"
            value="false"
            caption="Readonly"
          ></ch-checkbox>
        </div>
      </fieldset>

      <hr />

      <fieldset>
        <legend class="form-input__label">Filters</legend>

        <label class="form-input__label">
          Filter type
          <select class="form-input" name="filter-type" id="filter-type">
            <option value="caption">Caption</option>
            <option value="value">Value</option>
            <option value="id-list">List of ids</option>
            <option value="none" selected>None</option>
          </select>
        </label>

        <label class="form-input__label">
          Filter
          <input class="form-input" id="filter" value="" />
        </label>

        <div>
          <ch-checkbox
            id="camel-case"
            checked-value="true"
            un-checked-value="false"
            value="false"
            caption="Apply camel casing"
          ></ch-checkbox>

          <ch-checkbox
            id="hide-matches"
            checked-value="true"
            un-checked-value="false"
            value="false"
            caption="Hide matches and show non-matches"
          ></ch-checkbox>
        </div>
      </fieldset>
    </div>

    <script>
      const comboBox1 = document.getElementById("combobox-1");
      // const nativeSelect = document.getElementById("native-select");

      const currentValueInputRef = document.getElementById("current-value");
      const disabledCheckboxRef = document.getElementById("disabled");
      const readonlyCheckboxRef = document.getElementById("readonly");

      // Textblock
      const filterChangeTextBlock = document.getElementById(
        "filter-change-textblock"
      );

      // nativeSelect.addEventListener("input", () => {
      //   console.log("Native select input... - - - Value:", nativeSelect.value);
      // });

      // nativeSelect.addEventListener("change", () => {
      //   console.log("Native select change... - - - Value:", nativeSelect.value);
      // });

      // Current value input
      comboBox1.addEventListener("input", () => {
        currentValueInputRef.value = comboBox1.value;
      });

      comboBox1.addEventListener("change", () => {
        currentValueInputRef.value = comboBox1.value;
      });

      // Disabled checkbox
      disabledCheckboxRef.addEventListener("input", () => {
        comboBox1.disabled = disabledCheckboxRef.value === "true";
      });

      // Readonly checkbox
      readonlyCheckboxRef.addEventListener("input", () => {
        comboBox1.readonly = readonlyCheckboxRef.value === "true";
      });

      // Filter change
      comboBox1.addEventListener("filterChange", event => {
        filterChangeTextBlock.innerHTML = `+ + + + + + + Filter Change + + + + + + +<br>
          ${event.detail}<br>`;
      });

      const comboBox1Items = [
        { value: "Value 1", caption: "Label for the value 1" },
        {
          value: "Value 2",
          caption: "Label for the value 222",
          items: [
            { value: "Value 2.1", caption: "Label for the value 2.1" },
            { value: "Value 2.2", caption: "Label for the value 2.2" }
          ]
        },
        {
          value: "Value 3",
          caption: "Label for the value 3",
          disabled: true
        },
        { value: "Value 4", caption: "Label for the value 4" },
        {
          value: "Value 5",
          caption: "Label for the value 5",
          disabled: true,
          expandable: true,
          items: [
            { value: "Value 5.1", caption: "Label for the value 5.1" },
            { value: "Value 5.2", caption: "Label for the value 5.2" },
            {
              value: "Value 5.3",
              caption: "Label for the value 5.3",
              disabled: false
            },
            { value: "Value 5.4", caption: "Label for the value 5.4" }
          ]
        },
        {
          value: "Value 6",
          caption: "Label for the value 6",
          expandable: true,
          expanded: true,
          items: [
            {
              value: "Value 6.1",
              caption: "Label for the value 6.1",
              disabled: true
            },
            {
              value: "Value 6.2",
              caption: "Label for the value 6.2",
              disabled: true
            },
            {
              value: "Value 6.3",
              caption: "Label for the value 6.3",
              disabled: false
            },
            { value: "Value 6.4", caption: "Label for the value 6.4" }
          ]
        },
        {
          value: "Value 7",
          caption: "Label for the value 7",
          disabled: true
        },
        { value: "Value 8", caption: "Label for the value 8" },
        {
          value: "Value 9",
          caption: "Label for the value 9",
          expandable: true,
          items: [
            { value: "Value 9.1", caption: "Label for the value 9.1" },
            { value: "Value 9.2", caption: "Label for the value 9.2" },
            {
              value: "Value 9.3",
              caption: "Label for the value 9.3",
              disabled: false
            },
            { value: "Value 9.4", caption: "Label for the value 9.4" }
          ]
        }
      ];

      const comboBoxItems2 = [
        { value: "chocolate", caption: "Chocolate" },
        { value: "coconut", caption: "Coconut" },
        { value: "mint", caption: "Mint" },
        { value: "strawberry", caption: "Strawberry" },
        { value: "vanilla", caption: "Vanilla" }
      ];

      const comboBoxItemsGeneXus = [
        {
          value: "Basics",
          caption: "Basics",
          expandable: true,
          expanded: true,
          items: [
            { value: "Audio", caption: "Audio" },
            { value: "Blob", caption: "Blob" },
            { value: "BlobFile", caption: "BlobFile" },
            { value: "Boolean", caption: "Boolean" },
            { value: "Character", caption: "Character" },
            { value: "Date", caption: "Date" },
            { value: "DateTime", caption: "DateTime" },
            { value: "Geography", caption: "Geography" },
            { value: "GeoLine", caption: "GeoLine" },
            { value: "GeoPoint", caption: "GeoPoint" },
            { value: "GeoPolygon", caption: "GeoPolygon" },
            { value: "GUID", caption: "GUID" },
            { value: "Image", caption: "Image" },
            { value: "LongVarChar", caption: "LongVarChar" },
            { value: "Numeric", caption: "Numeric" },
            { value: "VarChar", caption: "VarChar" },
            { value: "Video", caption: "Video" }
          ]
        },
        {
          value: "Extended Types",
          caption: "Extended Types",
          expandable: true,
          items: [
            { value: "Cache", caption: "Cache" },
            { value: "ContentInfo", caption: "ContentInfo" },
            { value: "Cookie", caption: "Cookie" },
            {
              value: "CryptoAsymmetricEncrypt",
              caption: "CryptoAsymmetricEncrypt"
            },
            { value: "CryptoCertificate", caption: "CryptoCertificate" },
            { value: "CryptoHash", caption: "CryptoHash" },
            { value: "CryptoSign", caption: "CryptoSign" },
            { value: "CryptoSignXml", caption: "CryptoSignXml" },
            {
              value: "CryptoSymmetricEncrypt",
              caption: "CryptoSymmetricEncrypt"
            },
            { value: "DBConnection", caption: "DBConnection" },
            { value: "Directory", caption: "Directory" },
            { value: "ExcelDocument", caption: "ExcelDocument" },
            { value: "Expression", caption: "Expression" },
            { value: "File", caption: "File" },
            { value: "HttpClient", caption: "HttpClient" },
            { value: "HttpRequest", caption: "HttpRequest" },
            { value: "HttpResponse", caption: "HttpResponse" }
          ]
        },
        {
          value: "Structured Data Types",
          caption: "Structured Data Types",
          expandable: true,
          items: [
            {
              value: "GeneXus.Common.AnalyticsKeyValue",
              caption: "AnalyticsKeyValue, GeneXus.Common"
            },
            {
              value: "GeneXus.Common.AnalyticsKeyPurchase",
              caption: "AnalyticsKeyPurchase, GeneXus.Common"
            },
            {
              value: "GeneXus.Common.AnalyticsKeyPurchase.Item",
              caption: "AnalyticsKeyPurchase.Item, GeneXus.Common"
            },
            {
              value: "GeneXus.SD.Media.AudioPlayerCustomAction",
              caption: "AudioPlayerCustomAction, GeneXus.SD.Media"
            },
            {
              value: "GeneXus.SD.Media.AudioPlayerSettings",
              caption: "AudioPlayerSettings, GeneXus.SD.Media"
            },
            {
              value: "GeneXus.SD.BeaconInfo",
              caption: "BeaconInfo, GeneXus.SD"
            },
            {
              value: "GeneXus.SD.BeaconProximityAlert",
              caption: "BeaconProximityAlert, GeneXus.SD"
            },
            {
              value: "GeneXus.SD.BeaconRegion",
              caption: "BeaconRegion, GeneXus.SD"
            },
            {
              value: "GeneXus.SD.BeaconState",
              caption: "BeaconState, GeneXus.SD"
            },
            {
              value: "GeneXus.SD.CardInformation",
              caption: "CardInformation, GeneXus.SD"
            },
            {
              value: "GeneXus.Common.Notifications.Configuration",
              caption: "Configuration, GeneXus.Common.Notifications"
            },
            {
              value: "GeneXus.Common.Notifications.ConfigurationProperty",
              caption: "ConfigurationProperty, GeneXus.Common.Notifications"
            }
          ]
        },
        {
          value: "External Objects",
          caption: "External Objects",
          expandable: true,
          startImgSrc: "./assets/icons/external-object.svg",
          items: [
            {
              value: "GeneXus.SD.Actions",
              caption: "Actions, GeneXus.SD",
              startImgSrc: "./assets/icons/external-object.svg",
              endImgSrc: "./assets/icons/external-object.svg"
            },
            {
              value: "GeneXus.SD.Ads",
              caption: "Ads, GeneXus.SD",
              startImgSrc: "./assets/icons/external-object.svg",
              endImgSrc: "./assets/icons/external-object.svg"
            },
            {
              value: "GeneXus.Common.Analytics",
              caption: "Analytics, GeneXus.Common",
              startImgSrc: "./assets/icons/external-object.svg",
              endImgSrc: "./assets/icons/external-object.svg"
            },
            {
              value: "GeneXus.Common.AnyObject",
              caption: "AnyObject, GeneXus.Common",
              startImgSrc: "./assets/icons/external-object.svg",
              endImgSrc: "./assets/icons/external-object.svg"
            },
            {
              value: "GeneXus.Common.UI.Appearance",
              caption: "Appearance, GeneXus.Common.UI",
              startImgSrc: "./assets/icons/external-object.svg",
              endImgSrc: "./assets/icons/external-object.svg"
            }
          ]
        }
      ];

      // comboBox1.items = comboBox1Items;
      // comboBox1.items = comboBoxItems2;
      comboBox1.items = comboBoxItemsGeneXus;

      const filterTypeSelect = document.getElementById("filter-type");
      filterTypeSelect.addEventListener("input", event => {
        const selectedFilterType = event.target.value;
        comboBox1.filterType = selectedFilterType;
      });

      const filterInput = document.getElementById("filter");
      filterInput.addEventListener("input", event => {
        const filter = event.target.value;
        comboBox1.filter = filter;
      });

      const camelCaseCheckbox = document.getElementById("camel-case");
      camelCaseCheckbox.addEventListener("input", event => {
        const checked = event.target.value === "true";

        const newOptions = { ...comboBox1.filterOptions };
        newOptions.matchCase = checked;
        comboBox1.filterOptions = newOptions;
      });

      const hideMatchesCheckbox = document.getElementById("hide-matches");
      hideMatchesCheckbox.addEventListener("input", event => {
        const checked = event.target.value === "true";

        const newOptions = { ...comboBox1.filterOptions };
        newOptions.hideMatchesAndShowNonMatches = checked;
        comboBox1.filterOptions = newOptions;
      });
    </script>
  </body>
</html>
